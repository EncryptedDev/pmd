import { Client } from "discord-rpc";
export let user;
export default function getDiscordAppUser() {
    return new Promise(async (res, rej) => {
        if (user)
            return res(user);
        const client = new Client({ transport: "ipc" });
        const t = setTimeout(() => {
            if (user)
                return res(user);
            client.destroy();
            res(undefined);
        }, 500);
        try {
            await client.login({ clientId: "503557087041683458" });
            clearTimeout(t);
            await client.destroy();
        }
        catch { }
        user = client.user;
        res(client.user);
    });
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2V0RGlzY29yZEFwcFVzZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvZnVuY3Rpb25zL2dldERpc2NvcmRBcHBVc2VyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxNQUFNLEVBQVEsTUFBTSxhQUFhLENBQUM7QUFFM0MsTUFBTSxDQUFDLElBQUksSUFBc0IsQ0FBQztBQUVsQyxNQUFNLENBQUMsT0FBTyxVQUFVLGlCQUFpQjtJQUN4QyxPQUFPLElBQUksT0FBTyxDQUFtQixLQUFLLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxFQUFFO1FBQ3ZELElBQUksSUFBSTtZQUFFLE9BQU8sR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBRTNCLE1BQU0sTUFBTSxHQUFHLElBQUksTUFBTSxDQUFDLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBRSxDQUFDLENBQUM7UUFFaEQsTUFBTSxDQUFDLEdBQUcsVUFBVSxDQUFDLEdBQUcsRUFBRTtZQUN6QixJQUFJLElBQUk7Z0JBQUUsT0FBTyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUM7WUFFM0IsTUFBTSxDQUFDLE9BQU8sRUFBRSxDQUFDO1lBQ2pCLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUNoQixDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUM7UUFFUixJQUFJO1lBQ0gsTUFBTSxNQUFNLENBQUMsS0FBSyxDQUFDLEVBQUUsUUFBUSxFQUFFLG9CQUFvQixFQUFFLENBQUMsQ0FBQztZQUN2RCxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDaEIsTUFBTSxNQUFNLENBQUMsT0FBTyxFQUFFLENBQUM7U0FDdkI7UUFBQyxNQUFNLEdBQUU7UUFFVixJQUFJLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQztRQUVuQixHQUFHLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ2xCLENBQUMsQ0FBQyxDQUFDO0FBQ0osQ0FBQyJ9